todo:
- Move to algorithms
- simplify logic and refactor. See `STEPS` global variable in `app.py`